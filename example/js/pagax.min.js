var pagax_modules={};pagax_modules.ajax=pagax_modules.ajax||{default_request:{url:window.location.href,data:{location:window.location.href},before_message:"",error_message:"",error:function(){},success_message:"",success:function(){},failed:function(){}},last_request:this.default_request,request_count:0,active_request:"",running_requests:[],running_request_parameters:{},build:function(e){var a={url:e.url,timeout:e.hasOwnProperty("timeout")?e.timeout:6e4,type:e.hasOwnProperty("type")?e.type:"POST",data:e.hasOwnProperty("data")?e.data:{},before_message:e.hasOwnProperty("before_message")?e.before_message:"",success_message:e.hasOwnProperty("success_message")?e.success_message:"",error_message:e.hasOwnProperty("error_message")?e.error_message:"",contentType:e.hasOwnProperty("contentType")?e.contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:e.hasOwnProperty("processData")?e.processData:!0,async:e.hasOwnProperty("async")?e.async:!0,crossDomain:e.hasOwnProperty("crossDomain")?e.crossDomain:!1,beforeSend:function(a,t,r){e.hasOwnProperty("beforeSend")&&"function"==typeof e.beforeSend&&e.beforeSend(a,t,r)},error:function(a,t,r){e.hasOwnProperty("error")&&"function"==typeof e.error&&e.error(a,t,r)},success:function(a,t,r){e.hasOwnProperty("success")&&"function"==typeof e.success&&e.success(a,t,r)},complete:function(a,t,r){e.hasOwnProperty("complete")&&"function"==typeof e.complete&&e.complete(a,t,r)},failed:function(a,t,r){e.hasOwnProperty("failed")&&"function"==typeof e.failed&&e.failed(a,t,r)}};return a.hasOwnProperty("callback_parameters")||(a.callback_parameters={}),a.data.view_only=a.data.hasOwnProperty("view_only")?a.data.view_only:"true",a.data.requesting_url=a.data.hasOwnProperty("requesting_url")?a.data.requesting_url:window.location.href,a},new_request:function(feed){var obj=this;feed=obj.build(feed);var request=$.ajax({url:feed.url,data:feed.data,type:feed.type,timeout:feed.timeout,contentType:feed.contentType,processData:feed.processData,async:feed.async,crossDomain:feed.crossDomain,beforeSend:function(e){$(".cancel-loader").removeClass("open-loader"),obj.running_requests.push(feed.url),obj.running_request_parameters[feed.url]=feed,""==obj.active_request&&(obj.active_request=feed.url),feed.before_message&&($(".pagax-loader-layer .message-box").removeClass("success error"),$(".pagax-loader-layer .message").html(obj.running_request_parameters.hasOwnProperty(obj.active_request)?obj.running_request_parameters[obj.active_request].before_message:feed.before_message),$(".pagax-loader-layer").show()),obj.last_request=feed,feed.beforeSend(e)},success:function(response,status,xhr){try{response=$.parseJSON(response)}catch(err){feed.callback_parameters.is_json=!1}feed.callback_parameters.response=response,response.hasOwnProperty("data")||(feed.callback_parameters.data={title:""}),null!=response&&"success"==response.status&&(response.hasOwnProperty("data")&&(response.data.hasOwnProperty("redirect")||response.data.hasOwnProperty("refresh"))?pagax_modules.pagax.process_content(feed,response,feed.success):feed.success(feed.callback_parameters.response,status,xhr),obj.refresh_content(response),response.hasOwnProperty("data")&&response.data.hasOwnProperty("onload")&&eval(response.data.onload)),null!=response&&(!response.hasOwnProperty("status")||response.hasOwnProperty("status")&&"success"==response.status)?((feed.hasOwnProperty("redirect")&&!feed.redirect||!feed.hasOwnProperty("redirect"))&&obj.running_requests.length<=1&&$(".pagax-loader-layer").hide(),response.hasOwnProperty("message")||feed.success_message?($(".pagax-loader-layer .message-box").removeClass("error").addClass("success"),$(".pagax-loader-layer .message").html(response.hasOwnProperty("message")?response.message:feed.success_message),$(".pagax-loader-layer").show(),1==obj.running_requests.length?setTimeout(function(){$(".pagax-loader-layer").fadeOut(function(){$(".pagax-loader-layer").hide()})},2e3):($(".pagax-loader-layer .message-box").removeClass("success error"),$(".pagax-loader-layer .message").html(obj.running_request_parameters[obj.active_request].before_message),$(".pagax-loader-layer").show())):obj.running_requests.length<=1&&$(".pagax-loader-layer").hide()):null!=response&&response.hasOwnProperty("status")&&"failed"==response.status?(response.hasOwnProperty("message")||error_message?$(".pagax-loader-layer .message").html(response.hasOwnProperty("message")?response.message:error_message):$(".pagax-loader-layer .message").html("Some error occurred"),$(".cancel-loader").addClass("open-loader"),feed.failed(response,status,xhr)):null==response?($(".pagax-loader-layer .message-box").removeClass("success").addClass("error"),$(".pagax-loader-layer .message").html(error_message),$(".pagax-loader-layer").show()):0==obj.running_requests.length&&$(".pagax-loader-layer").hide(),obj.last_request=obj.default_request},complete:function(e,a,t){var r=0,s=[];$.each(obj.running_requests,function(e,a){a!=feed.url&&(s[r]=a,r++)}),obj.running_requests=s,delete obj.running_request_parameters[feed.url],obj.running_requests.length?(obj.active_request=s[0],$(".pagax-loader-layer .message-box").removeClass("success error"),$(".pagax-loader-layer .message").html(obj.running_request_parameters[obj.active_request].before_message)):obj.active_request="",obj.form_is_in_progress=!1,$("#pagax_request_try_again").click(function(){obj.new_request(obj.last_request)}),feed.complete(e,a,t)},error:function(e,a,t){if("error"==a&&("Internal Server Error"==t?$(".pagax-loader-layer .message").html('Internal Server Error!&nbsp;<a class="link" href="javascript:void(0);" id="pagax_request_try_again" style="float:none; margin-top:0;">Try Again</a>'):$(".pagax-loader-layer .message").html('Error!&nbsp;No internet connection.&nbsp;<a class="link" href="javascript:void(0);" id="pagax_request_try_again" style="float:none; margin-top:0;">Try Again</a>')),"timeout"==a&&($(".pagax-loader-layer .message").html('Error!&nbsp;Connection Timed out.<a class="link" id="pagax_request_try_again" style="float:none; margin-top:0;">Try Again</a>'),obj.request_count<3)){var r=5;$(".pagax-loader-layer .message").html("Error!&nbsp;Connection Timed out.&nbsp;Trying Again in "+r+" sec.");var s=setInterval(function(){r--,$(".pagax-loader-layer .message").html("Error!&nbsp;Connection Timed out.&nbsp;Trying Again in "+r+" sec."),r||clearInterval(s)},1e3);setTimeout(function(){obj.request_count++,obj.new_request(feed,"")},5500)}feed.error(e,a,t)}})},submit_form:function(e){var a=this;if(window.ActiveXObject||"ActiveXObject"in window)return!0;var t=e.hasOwnProperty("beforeSend")?e.beforeSend:"",r=e.hasOwnProperty("complete")?e.complete:"",s=e.hasOwnProperty("success")?e.success:"",o=e.hasOwnProperty("failed")?e.failed:"",n={beforeSend:function(a){pagax_modules.forms.disable($("#"+e.id)),"function"==typeof t&&t(a)},success:function(e){if(""!=e){if(e.hasOwnProperty("data")&&e.data.hasOwnProperty("redirect"))return pagax_modules.pagax.handle_redirect(e),!1;e.hasOwnProperty("data")&&e.data.hasOwnProperty("push_url")?pagax_modules.pagax.push_state(e):"function"==typeof s&&s(e)}},failed:function(e){return"function"==typeof o&&o(e),!1},complete:function(a){pagax_modules.forms.enable($("#"+e.id)),"function"==typeof r&&r(a)}};return e=$.extend({},e,n),a.new_request(e),!1},refresh_content:function(e){obj=this,e.hasOwnProperty("data")&&e.data.hasOwnProperty("show")&&$.each(e.data.show,function(a,t){""!=$("#"+t).html().trim()?$("#"+t).find(">").show():obj.refresh_section(e,a,t)}),e.hasOwnProperty("data")&&e.data.hasOwnProperty("refresh")&&$.each(e.data.refresh,function(a,t){obj.refresh_section(e,a,t)})},refresh_section:function(e,a,t){obj=this;var r={};if(e.data.hasOwnProperty("redirect")){var s=e.data.redirect.split("?");if(s.hasOwnProperty(1))var o=s[1],n=pagax_modules.ajax.parseQueryString("?"+o)}else var n=pagax_modules.ajax.parseQueryString(location.search);"undefined"!=n&&(r=$.extend(n,r)),$.ajax_request({url:HOST+a,before_message:"Loading",data:r,success:function(e){$("#"+t).html(e.data.content),$("#"+t).loaded(e)}})},parseQueryString:function(e){var a={};if(e){var t,r,s,o;for(e=e.split("?"),t=e[1].split("&"),s=0,o=t.length;o>s;s++)r=t[s].split("="),a[r[0]]=r[1]}return a},set_callback_parameters:function(e,a,t){return callback_parameters=a.hasOwnProperty("callback_parameters")?a.callback_parameters:{},callback_parameters.title=e.hasOwnProperty("data")&&e.data.hasOwnProperty("title")?e.data.title:history.state.title,e.hasOwnProperty("data")&&(callback_parameters.data=e.data),t&&(callback_parameters.form_parameters=!0),callback_parameters},call_callback:function(e,a,t,r){var s=this;if(""!=e){if("function"==typeof e)o=e;else var o=window[e];if("undefined"!==o&&$.isFunction(o)){var n=s.set_callback_parameters(a,t,r);o(n)}}}},$.ajax_request=function(e,a){pagax_modules.ajax.new_request(e,a)},pagax_modules.forms=pagax_modules.forms||{get_values:function(e){var a=["input:text:not([disabled])","input[type='number']:not([disabled])","input:hidden:not([disabled])","input:password:not([disabled])","input:checkbox:checked:not([disabled])","input:radio:checked:not([disabled])","select:not([disabled])","textarea:not([disabled])"];container=$("#"+e);for(var t={},r=0;r<a.length;r++){var s=container.find(a[r]);$(s).each(function(){var e=$(this).attr("name")?$(this).attr("name"):$(this).attr("id");e?e=e:jQuery.error="Undefined attr name for "+a[r],void 0!=e&&(e.match(/\[\]/g)?("checkbox"==$(this).attr("type")&&$(this).is(":checked")||"checkbox"!=$(this).attr("type"))&&(e=e.replace("[]",""),$.isArray(t[e])||(t[e]=[]),t[e].push($(this).val())):t[e]=$(this).val())})}return t},empty_fields:function(e){var a=["input:text","input:hidden","input:password","input:checked","select","textarea"];container=$("#"+e);for(var t=0;t<a.length;t++)for(var r=container.find(a[t]),s=0;s<r.length;++s)r[s].value=""},disable:function(e){var a=e.find("input:text:not([disabled]), input[type='number']:not([disabled]), input:hidden:not([disabled]), input:password:not([disabled]), input:checkbox:not([disabled]), input:radio:not([disabled]), select:not([disabled]), textarea:not([disabled]), .ui.selection.dropdown:not([disabled]), input[type='submit']");a.addClass("disabled").attr("disabled","disabled")},enable:function(e){var a=e.find("input:text, input[type='number'], input:hidden, input:password, input:checkbox, input:radio, select, textarea, .ui.selection.dropdown, input[type='submit']");a.removeClass("disabled").removeAttr("disabled"),a.not("[type='hidden']").first().focus()}},$.fn.onSubmit=function(e){e.hasOwnProperty("timeout")||("script"==$(this).data("type")&&pagax_modules.settings.hasOwnProperty("script")&&pagax_modules.settings.script.hasOwnProperty("timeout")?e.timeout=pagax_modules.settings.script.timeout:pagax_modules.settings.hasOwnProperty("ajax")&&pagax_modules.settings.script.hasOwnProperty("timeout")&&(e.timeout=pagax_modules.settings.script.timeout)),e.url=e.hasOwnProperty("url")?e.url:$(this).attr("action"),e.type=e.hasOwnProperty("type")?e.type:$(this).attr("method"),e.before_message=e.hasOwnProperty("before_message")?e.before_message:"Loading..";var a=pagax_modules.ajax.build(e);a.id=$(this).attr("id"),pagax_modules.ajax.form_is_in_progress=!1,$(this).off("submit").on("submit",function(t){t.preventDefault();var r=$(this);setTimeout(function(){if(e.hasOwnProperty("validate")&&e.validate)if(e.hasOwnProperty("validation")){if(!e.validation())return!1}else if(!r.hasClass("isValid"))return!1;if(!pagax_modules.ajax.form_is_in_progress){pagax_modules.ajax.form_is_in_progress=!0,a.data=$.extend({},a.data,pagax_modules.forms.get_values(a.id)),a.data=a.hasOwnProperty("data")?a.data:{};var t=pagax_modules.ajax.parseQueryString(location.search);"undefined"!=t&&(a.data=$.extend(t,a.data)),a.anchor={data:{target:void 0!=r.data("target")?r.data("target"):"content_container"},target:void 0!=r.data("target")?r.data("target"):"content_container"},a.data.data=a.anchor.data,pagax_modules.ajax.submit_form(a)}},1)})},pagax_modules.pagax=pagax_modules.pagax||{key_pressed:!1,user_agent:navigator.userAgent,load_content:function(e,a){var t=this,r={request:"page",page_location:e.link,requesting_url:window.location.href};e.hasOwnProperty("url")&&(r.view_only="true");var s={url:e.hasOwnProperty("url")?e.url:"/ajax.php",data:r,before_message:e.hasOwnProperty("before_message")?e.before_message:"Loading..",beforeSend:function(a){e.hasOwnProperty("beforeSend")&&"function"==typeof e.beforeSend&&e.beforeSend(a)},error:"",success:function(r,s,o){t.process_content(e,r,a)}};e.hasOwnProperty("timeout")&&(s.timeout=e.timeout),e.hasOwnProperty("post_parameters")&&(s.data=$.extend({},s.data,e.post_parameters),e.post_parameters.hasOwnProperty("data")&&e.post_parameters.data.hasOwnProperty("targetType")&&"modal"==e.post_parameters.data.targetType&&(s.targetType="modal",$("#"+e.post_parameters.data.target).length||pagax_modules.settings.modal.create(e.post_parameters.data.target),pagax_modules.settings.modal.activate(e.post_parameters.data.target))),e.hasOwnProperty("redirect")&&(s=$.extend({},s,{redirect:e.redirect})),$.ajax_request(s)},process_content:function(e,a,t){var r=this;if(""==a.data)window.location=e.link;else{if(a.hasOwnProperty("data")&&a.data.hasOwnProperty("redirect"))return r.handle_redirect(a),$("body").loaded(a),!1;a.hasOwnProperty("data")&&(e.response=a.data,r.set_page_content(e))}pagax_modules.ajax.call_callback(t,a,e)},refresh_page:function(e){var a=this;state_parameters={url:e.url,link:e.url,anchor:e.anchor,before_message:"Refreshing.."},e.anchor.hasOwnProperty("data")&&(state_parameters.post_parameters={data:e.anchor.data}),a.load_content(state_parameters,function(a){window.history.replaceState(e,a.title,e.url),document.title=a.title})},redirect_page:function(e){setTimeout(function(){var a="<div id='temp_pagax_link_container'><a id='temp_pagax_link' data-pagax_link='true' href='"+e+"'>link</a></div>";$("body").append(a),$("#temp_pagax_link_container").loaded(),$("#temp_pagax_link").trigger("click"),$("#temp_pagax_link_container").remove()},500)},handle_redirect:function(e){if(obj=this,e.data.hasOwnProperty("redirect")){var a={};return previous=history.state,a.id=previous.id+1,a.url=e.data.redirect,a.title=e.data.title,a.anchor={target:"content_container"},obj.load_content({before_message:"Redirecting..",redirect:!0,url:e.data.redirect,link:e.data.redirect,callback_parameters:{page:a,previous:previous,data:e.data,title:e.data.title},anchor:a.anchor,post_parameters:{force_ajax:!0}},pagax_modules.pagax.navigation_callback),!1}},push_state:function(e){if(obj=this,e.data.hasOwnProperty("push_url")){var a={};previous=history.state,a.id=previous.id+1,a.url=e.data.push_url,a.title=e.data.title,a.anchor={target:e.data.target},obj.navigation_callback({page:a,previous:previous,data:e.data})}},set_page_content:function(e){$("#"+e.anchor.target).html(e.response.content),"content_container"==e.anchor.target?$("html, body").animate({scrollTop:0},1):$("html, body").animate({scrollTop:$("#"+e.anchor.target).offset().top-$("#topbar").outerHeight()-20},1),$("#page_scripts").html(e.response.page_scripts),e.anchor.hasOwnProperty("data")&&e.anchor.data.hasOwnProperty("targetType")&&pagax_modules.settings.modal.show(e.anchor.target),e.response.hasOwnProperty("remove")&&$.each(e.response.remove,function(e,a){$("#"+e).remove()}),e.response.hasOwnProperty("hide")&&$.each(e.response.hide,function(e){$("#"+e).hide()}),setTimeout(function(){$(document).trigger("page_ready",[e.response]),$(document).trigger("page_load",[e.response])},50)},on_modal_hide:function(e){(!(window.history.state.hasOwnProperty("next")&&window.history.state.next.hasOwnProperty("anchor")&&window.history.state.next.anchor.hasOwnProperty("data")&&window.history.state.next.anchor.data.hasOwnProperty("target")&&window.history.state.next.anchor.target==e)||window.history.state.hasOwnProperty("anchor")&&window.history.state.anchor.hasOwnProperty("data")&&window.history.state.anchor.data.hasOwnProperty("target")&&window.history.state.hasOwnProperty("next")&&window.history.state.next.hasOwnProperty("anchor")&&window.history.state.next.anchor.hasOwnProperty("data")&&window.history.state.next.anchor.data.hasOwnProperty("target")&&window.history.state.anchor.target==e)&&window.history.back()},onpopstate:function(e){var a=this;return e.state.hasOwnProperty("next")&&e.state.next.anchor.hasOwnProperty("data")&&e.state.next.anchor.data.hasOwnProperty("targetType")&&"modal"==e.state.next.anchor.data.targetType&&(!e.state.anchor.hasOwnProperty("data")||e.state.anchor.hasOwnProperty("data")&&(!e.state.anchor.data.hasOwnProperty("targetType")||e.state.anchor.data.hasOwnProperty("targetType")&&"modal"!=e.state.anchor.data.targetType))&&$("#"+e.state.next.anchor.target).length?(pagax_modules.settings.modal.hide(e.state.next.anchor.data.target),setTimeout(function(){pagax_modules.settings.modal.remove(e.state.next.anchor.data.target)},200),!1):void(e.state&&a.refresh_page(e.state))},navigation_callback:function(e){e.page.title=e.title,e.previous.next=e.page,e.data.hasOwnProperty("replace_url")&&(e.previous.url=e.data.replace_url),window.history.replaceState(e.previous,e.previous.title,e.previous.url),e.page.anchor.hasOwnProperty("data")?e.page.anchor.data.hasOwnProperty("replaceState")&&e.page.anchor.data.replaceState?window.history.replaceState(e.page,e.page.title,e.page.url):e.page.anchor.data.hasOwnProperty("sameState")&&e.page.anchor.data.sameState||window.history.pushState(e.page,e.page.title,e.page.url):window.history.pushState(e.page,e.page.title,e.page.url),document.title=e.title},onready:function(e){var a=this;if(!(window.ActiveXObject||"ActiveXObject"in window)){var t=window.location.href,r={id:null!=window.history.state&&window.history.state.hasOwnProperty("id")?window.history.state.id:0,url:t,title:document.title,anchor:null!=window.history.state&&window.history.state.hasOwnProperty("anchor")?window.history.state.anchor:{target:"content_container"}};if(null!=window.history.state&&window.history.state.hasOwnProperty("anchor")&&window.history.state.anchor.hasOwnProperty("data")&&window.history.state.anchor.data.hasOwnProperty("targetType")&&"modal"==window.history.state.anchor.data.targetType&&!$("#"+window.history.state.anchor.target).length&&(r.anchor={target:"content_container"}),history.state&&(history.state.hasOwnProperty("next")&&(r.next=history.state.next),history.state.hasOwnProperty("form_parameters")&&(r.form_parameters=history.state.form_parameters)),!$(".pagax-loader-layer").length){var s='<div class="pagax-loader-layer"><div class="message-box"><div class="message">Loading...</div><a class="cancel-loader">Cancel</a></div></div>';$("body").append(s),$(".pagax-loader-layer .cancel-loader").off("click").on("click",function(){$(".pagax-loader-layer").hide()})}window.history.replaceState(r,document.title,t)}$("a[data-pagax_link='true'], div[href]").unbind("click").click(function(){var e=$(this),t=e.attr("href");if(e.data("pagax_link")||e.is("div")){if(e.data("target",e.data("target")?e.data("target"):"content_container"),t&&e.data("target")&&t!=window.location.href){var r={};if(previous=history.state,r.id=previous.id+1,r.url=t,r.title=document.title,r.anchor={target:e.data("target"),id:e.attr("id")},!(window.ActiveXObject||"ActiveXObject"in window)){var s={link:t,anchor:r.anchor,callback_parameters:{page:r,previous:previous}};s.post_parameters={data:{}},s.anchor.data={},$.each($(this).data(),function(e,a){$.isPlainObject(a)||(s.post_parameters.data[e]=a,s.anchor.data[e]=a)}),s.url=t,"script"==e.data("type")&&pagax_modules.settings.hasOwnProperty("script")&&pagax_modules.settings.script.hasOwnProperty("timeout")?s.timeout=pagax_modules.settings.script.timeout:pagax_modules.settings.hasOwnProperty("ajax")&&pagax_modules.settings.script.hasOwnProperty("timeout")&&(s.timeout=pagax_modules.settings.script.timeout),a.load_content(s,pagax_modules.pagax.navigation_callback)}}if(!(window.ActiveXObject||"ActiveXObject"in window))return!1}})},onkeydown:function(e){return obj=this,e=e?e:document.event,obj.key_pressed=e.which?e.which:e.keyCode,27==obj.key_pressed&&window.history.state.hasOwnProperty("anchor")&&window.history.state.anchor.hasOwnProperty("data")&&window.history.state.anchor.data.hasOwnProperty("targetType")&&"modal"==window.history.state.anchor.data.targetType&&$("#"+window.history.state.anchor.target).length?(window.history.back(),!1):void 0},onkeyup:function(e){obj=this,obj.key_pressed=!1}},$.fn.pagax=function(){$(this).find("a[href]:not([data-pagax_link='false'])").each(function(){var e=HOST;"/"===e.substr(-1)&&(e=e.substr(0,e.length-1)),null!=$(this).attr("href").match(new RegExp(e,"g"))&&$(this).attr("data-pagax_link","true")}),$.each(pagax_modules,function(e,a){$.isFunction(a.onready)&&a.onready()}),$(document).off("keydown").on("keydown",function(e){$.each(pagax_modules,function(a,t){$.isFunction(t.onkeydown)&&t.onkeydown(e)})}),$(document).off("keyup").on("keyup",function(e){$.each(pagax_modules,function(a,t){$.isFunction(t.onkeyup)&&t.onkeyup(e)})})},$.initPagax=function(e){pagax_modules.settings=e,window.onpopstate=function(e){$.each(pagax_modules,function(a,t){$.isFunction(t.onpopstate)&&t.onpopstate(e)})},$(document).off("ready").on("ready",function(e){$(document).trigger("page_ready",[{}])})},$(document).on("page_ready",function(e,a){$("body").loaded(a)}),$.fn.load_complete=function(e){},$.fn.loaded=function(e){$(this).pagax(),$("[data-ajax_form='true']").each(function(){var e=$(this);$(this).onSubmit({url:e.attr("action")})}),$(this).load_complete(e)};